<div class="container" *ngIf="event">
  <div class="event-header">
    <img [src]="'http://127.0.0.1:8000' + event.banner" alt="image-event" class="event-image" />
    <div class="event-info">
      <div class="event-category">
        <p><i class="fas fa-music"></i> Musique</p>
        <p><i class="fas fa-festival"></i> Festival</p>
      </div>
      <h1>{{ event.name }}</h1>
      <div class="event-date">
        <p><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 50 50"><path fill="currentColor" d="m25 42.5l-.8-.9C23.7 41.1 12 27.3 12 19c0-7.2 5.8-13 13-13s13 5.8 13 13c0 8.3-11.7 22.1-12.2 22.7zM25 8c-6.1 0-11 4.9-11 11c0 6.4 8.4 17.2 11 20.4c2.6-3.2 11-14 11-20.4c0-6.1-4.9-11-11-11"/><path fill="currentColor" d="M25 24c-2.8 0-5-2.2-5-5s2.2-5 5-5s5 2.2 5 5s-2.2 5-5 5m0-8c-1.7 0-3 1.3-3 3s1.3 3 3 3s3-1.3 3-3s-1.3-3-3-3"/></svg>{{ event.location }}</p>
        <p><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 15 15"><path fill="currentColor" fill-rule="evenodd" d="M4.5 1a.5.5 0 0 1 .5.5V2h5v-.5a.5.5 0 0 1 1 0V2h1.5A1.5 1.5 0 0 1 14 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 1 12.5v-9A1.5 1.5 0 0 1 2.5 2H4v-.5a.5.5 0 0 1 .5-.5M10 3v.5a.5.5 0 0 0 1 0V3h1.5a.5.5 0 0 1 .5.5V5H2V3.5a.5.5 0 0 1 .5-.5H4v.5a.5.5 0 0 0 1 0V3zM2 6v6.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V6zm5 1.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0M9.5 7a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1m1.5.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0m.5 1.5a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1M9 9.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0M7.5 9a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1M5 9.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0M3.5 9a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1M3 11.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0m2.5-.5a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1m1.5.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0m2.5-.5a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1" clip-rule="evenodd"/></svg>{{ event.date }}</p>
      </div>
    </div>
  </div>

  <div class="event-details" *ngIf="!onDesktop || (onDesktop && currentPageNumber === 0)">
    <div class="event-details-container">
      <div class="event-description">
        <h2>{{ event.name }}</h2>
        <p>{{ event.description }}</p>
        <p class="ticket-available"><strong>Nombre de billet disponible : </strong><span id="ticket-available">{{ ticketAvailable }} places</span></p>
      </div>
      <div class="ticket-purchase">
        <h3>Acheter mon billet</h3>
        <div class="ticket-price" id="ticket-price">
          <p><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 32 32"><path fill="currentColor" d="M29 14a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v5a1 1 0 0 0 1 1a2 2 0 0 1 0 4a1 1 0 0 0-1 1v5a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2v-5a1 1 0 0 0-1-1a2 2 0 0 1 0-4m-1 5.87V24h-7v-3h-2v3H4v-4.13a4 4 0 0 0 0-7.74V8h15v3h2V8h7v4.13a4 4 0 0 0 0 7.74"/><path fill="currentColor" d="M19 13h2v6h-2z"/></svg>{{event.ticket_price === 0 ? 'Gratuit' : event.ticket_price | currency: 'XOF' }} </p>
          <div class="ticket-quantity" id="ticket-quantity">
            <button id="decrease" class="button-quantity" (click)="changeQuantity(-1)">-</button>
            <p>{{ quantity }}</p>
            <button id="increase" class="button-quantity" (click)="changeQuantity(1)">+</button>
          </div>
        </div>
      </div>
      <div class="button-container">
        <button class="purchase-button" (click)="onDesktop && currentPageNumber === 0 ? setPage(1) : openPurchaseModal()">Suivant</button>
      </div>
    </div>
  </div>

  <div class="event-details" *ngIf="onDesktop && currentPageNumber === 1">
    <div class="purchase-header">
      <button class="back-button" (click)="close()">&larr;</button>
      <h1>Votre achat</h1>
    </div>

    <div class="event-summary">
      <div class="event-summary-container">
        <h2>{{ event.name }}</h2>
        <div>
          <p>
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 50 50">
              <path fill="currentColor" d="m25 42.5l-.8-.9C23.7 41.1 12 27.3 12 19c0-7.2 5.8-13 13-13s13 5.8 13 13c0 8.3-11.7 22.1-12.2 22.7zM25 8c-6.1 0-11 4.9-11 11c0 6.4 8.4 17.2 11 20.4c2.6-3.2 11-14 11-20.4c0-6.1-4.9-11-11-11" />
            </svg>{{ event.location }}
          </p>
          <p>
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 15 15">
              <path fill="currentColor" fill-rule="evenodd" d="M4.5 1a.5.5 0 0 1 .5.5V2h5v-.5a.5.5 0 0 1 1 0V2h1.5A1.5 1.5 0 0 1 14 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 1 12.5v-9A1.5 1.5 0 0 1 2.5 2H4v-.5a.5.5 0 0 1 .5-.5M10 3v.5a.5.5 0 0 0 1 0V3h1.5a.5.5 0 0 1 .5.5V5H2V3.5a.5.5 0 0 1 .5-.5H4v.5a.5.5 0 0 0 1 0V3zM2 6v6.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V6zm5 1.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0M9.5 7a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1m1.5.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0m.5 1.5a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1M9 9.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0M7.5 9a.5.5 0 1 0 0 1a.5.5 0 0 0 0-1M5 9.5a.5.5 0 1 1 1 0a.5.5 0 0 1-1 0" />
            </svg>{{ event.date }}
          </p>
        </div>
      </div>
      <div class="ticket-info">
        <div class="ticket-details">
          <div class="info-item">
            <h4>Montant</h4>
            <span>{{ event.ticket_price | currency: 'XOF' }}</span>
          </div>
          <div class="info-item">
            <h4>Quantité</h4>
            <span>x {{ quantity }}</span>
          </div>
        </div>
        <div class="total-amount">
          <h4>Montant total</h4>
          <span class="total-price">{{ totalAmount | currency: 'XOF' }}</span>
        </div>
      </div>

      <!-- Afficher ce formulaire uniquement si l'utilisateur n'est pas connecté -->

<div *ngIf="!isAuthenticated">
  <form>
    <div class="input-group">
      <label for="name">Nom & Prénom</label>
      <input type="text" id="name" [(ngModel)]="userName" name="userName" placeholder="Votre nom" required>
    </div>
    <div class="input-group">
      <label for="email">Email</label>
      <input type="email" id="email" [(ngModel)]="userEmail" name="userEmail" placeholder="Votre email" required>
    </div>
  </form>
</div>


      <div class="additional-info">
        <p>Lorem Ipsum has been the industry's standard dummy text since the 1500s.</p>
      </div>

      <div class="action-buttons">
        <button class="confirm-button" (click)="purchaseTicket()">Confirmer</button>
        <button class="cancel-button" (click)="cancel()">Annuler</button>

        <!-- Afficher le lien de paiement si disponible -->
        <div *ngIf="paymentUrl" class="payment-link-container">
          <a [href]="paymentUrl" target="_blank" class="payment-link">Continuer vers le paiement</a>
        </div>
      </div>

  </div>
